# Recurring Jobs Configuration for Swing Trading System
# SolidQueue uses this file for scheduling recurring jobs

production: &production
  daily_candle_ingestion:
    class: Candles::DailyIngestorJob
    schedule: "0 7:30 * * *" # 07:30 IST daily
    queue: default
    args: []

  weekly_candle_ingestion:
    class: Candles::WeeklyIngestorJob
    schedule: "0 7:30 * * 1" # 07:30 IST every Monday
    queue: default
    args: []

  swing_screener:
    class: Screeners::SwingScreenerJob
    schedule: "0 7:40 * * 1-5" # 07:40 IST weekdays only
    queue: default
    args: []

  monitor_health:
    class: MonitorJob
    schedule: "*/30 * * * *" # Every 30 minutes
    queue: default
    args: []

development:
  # Cleanup finished jobs
  clear_solid_queue_finished_jobs:
    command: "SolidQueue::Job.clear_finished_in_batches(sleep_between_batches: 0.3)"
    schedule: every hour at minute 12

  # Daily candle ingestion at 07:30 IST
  daily_candle_ingestion:
    class_name: Candles::DailyIngestorJob
    queue_name: default
    schedule: at 7:30am every day

  # Weekly candle ingestion at 07:30 IST every Monday
  weekly_candle_ingestion:
    class_name: Candles::WeeklyIngestorJob
    queue_name: default
    schedule: at 7:30am every Monday

  # Swing screener at 07:40 IST weekdays only
  swing_screener:
    class_name: Screeners::SwingScreenerJob
    queue_name: default
    schedule: at 7:40am every weekday

  # Health monitoring every 30 minutes
  monitor_health:
    class_name: MonitorJob
    queue_name: default
    schedule: every 30 minutes

test:
  # No recurring jobs in test environment
